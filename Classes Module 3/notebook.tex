
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{03\_4.1\_pagerank\_hits\_bis}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{Page Rank and HITS}\label{page-rank-and-hits}

\emph{Deadline: 05.03.2019 at 23:59}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}512}]:} \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
          \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
          \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
          \PY{k+kn}{import} \PY{n+nn}{networkx} \PY{k}{as} \PY{n+nn}{nx}
          \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{colors} \PY{k}{as} \PY{n+nn}{mcolors}
          \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
\end{Verbatim}


    This lab will be playing with the algorithms Page Rank and HITS.

\subsection{Task 1}\label{task-1}

First, we shall look at our good friends from this karate club. Let us
pick several values for coefficient \(\alpha\) and see what we get.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}513}]:} \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{karate\PYZus{}club\PYZus{}graph}\PY{p}{(}\PY{p}{)}
          
          \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{14}\PY{p}{,}\PY{l+m+mi}{7}\PY{p}{)}\PY{p}{)}
          
          \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{121}\PY{p}{)} \PY{c+c1}{\PYZsh{} Plotting PR for several alphas    }
          \PY{n}{alphas} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mf}{1.1}\PY{p}{,} \PY{l+m+mf}{0.2}\PY{p}{)}
          \PY{k}{for} \PY{n}{alp} \PY{o+ow}{in} \PY{n}{alphas}\PY{p}{:}
              \PY{n}{pr} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{n}{alp}\PY{p}{)}
              \PY{n}{prval} \PY{o}{=} \PY{n}{pr}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}
              \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{prval}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{alpha }\PY{l+s+si}{\PYZob{}0:.2f\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{alp}\PY{p}{)}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
          
          \PY{n}{ay} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{122}\PY{p}{)} \PY{c+c1}{\PYZsh{} Plotting Degree centrality}
          \PY{n}{dc} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{nx}\PY{o}{.}\PY{n}{degree\PYZus{}centrality}\PY{p}{(}\PY{n}{G}\PY{p}{)}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          \PY{n}{ay}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{dc}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{degree\PYZus{}centrality}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{ay}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}513}]:} <matplotlib.legend.Legend at 0x7f3a0d7fde10>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_3_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  How can you normalize degree centrality so that it sums up to 1? Do it
  and plot all these on the same plot.
\end{enumerate}

    We can normalize degree centralities to sum \(1\) by dividing each value
by the sum.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}514}]:} \PY{n}{normed\PYZus{}dc} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{dc}\PY{p}{)} \PY{o}{/} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{dc}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}
          \PY{n}{normed\PYZus{}dc}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}514}]:} 1.0
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}515}]:} \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{14}\PY{p}{,}\PY{l+m+mi}{7}\PY{p}{)}\PY{p}{)}
          \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{111}\PY{p}{)}
          \PY{n}{pr} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n}{prval} \PY{o}{=} \PY{n}{pr}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{prval}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{alpha }\PY{l+s+si}{\PYZob{}0:.2f\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{alp}\PY{p}{)}\PY{p}{,}  \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.7}\PY{p}{)}
              
          \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{normed\PYZus{}dc}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bo}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{normalized degree\PYZus{}centrality}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    We see that degree centralities for \(\alpha = 1\) directly matches
normalized degree centralities.

    \begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{1}
\tightlist
\item
  In order to see how fast it converges, we shall need to code our own
  Page Rank algorithm. Code a function \texttt{mypagerank(G,alpha,k)}
  which executes the power iteration \(k\) times starting from the
  uniform distribution among nodes in the graph. It should return the
  list of page rank scores. Recall that
  \[ \mathbf{p}^{t+1} = \alpha (D^{-1}A)^{\top}\mathbf{p} + (1-\alpha)\frac{\mathbf{e}}{n}, \]
  where \(A\) is the adjacency matrix of \(G\) and \(D\) is the diagonal
  matrix made of degrees of vertices.
\end{enumerate}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}516}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Reminder: A @ B computes the multiplication of matrices A and B.}
          
          \PY{k}{def} \PY{n+nf}{mypagerank}\PY{p}{(}\PY{n}{graph}\PY{p}{,}\PY{n}{alpha}\PY{p}{,}\PY{n}{k}\PY{p}{)}\PY{p}{:}
              \PY{n}{adjacency\PYZus{}matrix} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{adjacency\PYZus{}matrix}\PY{p}{(}\PY{n}{graph}\PY{p}{)}\PY{o}{.}\PY{n}{todense}\PY{p}{(}\PY{p}{)}
              \PY{n}{node\PYZus{}amount} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{adjacency\PYZus{}matrix}\PY{p}{)}
              \PY{n}{diags} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{adjacency\PYZus{}matrix}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{flatten}\PY{p}{(}\PY{p}{)}
              \PY{n}{D} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{diag}\PY{p}{(}\PY{n}{diags}\PY{p}{)}
              \PY{n}{p} \PY{o}{=} \PY{p}{(}\PY{l+m+mi}{1}\PY{o}{/}\PY{n}{node\PYZus{}amount} \PY{o}{*} \PY{n}{np}\PY{o}{.}\PY{n}{ones}\PY{p}{(}\PY{p}{(}\PY{n}{adjacency\PYZus{}matrix}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{p}{(}\PY{n}{node\PYZus{}amount}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
              \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{k}\PY{p}{)}\PY{p}{:}
                  \PY{n}{p} \PY{o}{=} \PY{n}{alpha} \PY{o}{*} \PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{linalg}\PY{o}{.}\PY{n}{inv}\PY{p}{(}\PY{n}{D}\PY{p}{)} \PY{o}{@} \PY{n}{adjacency\PYZus{}matrix}\PY{p}{)}\PY{o}{.}\PY{n}{T} \PY{o}{@} \PY{n}{p} \PY{o}{+} \PY{p}{(}\PY{l+m+mi}{1} \PY{o}{\PYZhy{}} \PY{n}{alpha}\PY{p}{)} \PY{o}{*} \PY{n}{np}\PY{o}{.}\PY{n}{ones}\PY{p}{(}\PY{p}{(}\PY{n}{adjacency\PYZus{}matrix}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}\PY{o}{/}\PY{n}{node\PYZus{}amount}
              
              \PY{k}{return} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{o}{.}\PY{n}{flatten}\PY{p}{(}\PY{p}{)}
          
          \PY{n}{mypagerank}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{l+m+mf}{0.1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}516}]:} array([0.04174837, 0.03341912, 0.03281454, 0.03006944, 0.0283701 ,
                 0.02984069, 0.02984069, 0.02776552, 0.02810193, 0.02693772,
                 0.0283701 , 0.02665441, 0.02714461, 0.02793853, 0.0268887 ,
                 0.0268887 , 0.02794118, 0.02698121, 0.0268887 , 0.02715422,
                 0.0268887 , 0.02698121, 0.0268887 , 0.02933968, 0.02867647,
                 0.02852941, 0.02737889, 0.02850634, 0.02742791, 0.02894752,
                 0.02780373, 0.0300137 , 0.03742791, 0.04343137])
\end{Verbatim}
            
    Alright, let us see how it goes...

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{2}
\tightlist
\item
  Plot the results after 0 up to 10 iterations.
\end{enumerate}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}517}]:} \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{7}\PY{p}{,}\PY{l+m+mi}{7}\PY{p}{)}\PY{p}{)}
          \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{111}\PY{p}{)}    
          
          \PY{n}{its} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{4}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}
          
          \PY{k}{for} \PY{n}{it} \PY{o+ow}{in} \PY{n}{its}\PY{p}{:}
              \PY{n}{pr} \PY{o}{=} \PY{n}{mypagerank}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{l+m+mf}{0.85}\PY{p}{,} \PY{n}{it}\PY{p}{)}
              \PY{n}{prval} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{pr}\PY{p}{)}
              \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{prval}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}:d\PYZcb{}}\PY{l+s+s1}{ iteration(s)}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{it}\PY{p}{)}\PY{p}{)}\PY{c+c1}{\PYZsh{}, alpha = it/len(its)+0.2)}
              
          \PY{n}{ax}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}517}]:} <matplotlib.legend.Legend at 0x7f3a10618470>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_12_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{3}
\tightlist
\item
  Pay attention to the order of colors. What do you observe? How can you
  explain it?
\end{enumerate}

    Initially we have uniform pageranks, hence the horizontal line.

After one iteration the highly connected nodes get a lot of pagerank, as
all nodes provide equal pagerank. The weakly connected nodes get less
pagerank. So we get the jagged orange line.

After two iterations the line "jumps back" towards the horizontal line.
Highly connected nodes get less pagerank, weakly connected nodes get
more pagerank.

After three iterations the highly connected nodes get more pagerank, and
the weakly connected ones get less pagerank \textbf{again}.

We draw a conclusion that the algorithm does not converge monotonically.
It tends to extend and retract.

The horizontal line divides the highly connected and the weakly
connected nodes.

    \begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{4}
\tightlist
\item
  Plot Page Rank vs Degree Centrality for \(\alpha\) in \(\{0,0.5,1\}\).
\end{enumerate}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}518}]:} \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{15}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
          
          \PY{n}{d} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{degree\PYZus{}centrality}\PY{p}{(}\PY{n}{G}\PY{p}{)}
          \PY{n}{d} \PY{o}{=} \PY{n}{d}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}
          \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{131}\PY{p}{)}    
          \PY{n}{pr} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
          \PY{n}{pr} \PY{o}{=} \PY{n}{pr}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank \PYZdl{}alpha=0\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{d}\PY{p}{,} \PY{n}{pr}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{+}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
          \PY{n}{ay} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{132}\PY{p}{)}    
          \PY{n}{pr} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}
          \PY{n}{pr} \PY{o}{=} \PY{n}{pr}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}
          \PY{n}{ay}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank \PYZdl{}alpha=0.5\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ay}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{d}\PY{p}{,} \PY{n}{pr}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{+}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
          \PY{n}{az} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{133}\PY{p}{)}    
          \PY{n}{pr} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n}{pr} \PY{o}{=} \PY{n}{pr}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}
          \PY{n}{az}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank \PYZdl{}alpha=1\PYZdl{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{az}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{d}\PY{p}{,} \PY{n}{pr}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{+}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_16_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \subsection{Task 2}\label{task-2}

Experiment several teleportation vectors on the coappearance network of
characters in the novel \emph{Les Mis√©rables} (V. Hugo). The graph is in
the file \texttt{lesmis.gml}. It was compiled by Donald Knuth {[}1{]}.
Try to focus on several famous characters (Valjean, Javert, Gavroche,
Cosette), or use betweenness centrality (is degree centrality of
interest here?) for the teleportation. Each time, draw the network
induced by nodes with high page rank. What can you observe?

{[}1{]} D. E. Knuth, \emph{The Stanford GraphBase: A Platform for
Combinatorial Computing}, Addison-Wesley, Reading, MA (1993).

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}519}]:} \PY{n}{graph} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{read\PYZus{}gml}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lesmis.gml}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{pos} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{spring\PYZus{}layout}\PY{p}{(}\PY{n}{graph}\PY{p}{)}
          
          \PY{n}{nx}\PY{o}{.}\PY{n}{draw\PYZus{}networkx}\PY{p}{(}\PY{n}{graph}\PY{p}{,}\PY{n}{pos}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_18_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}520}]:} \PY{k}{def} \PY{n+nf}{draw}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{pos}\PY{p}{,} \PY{n}{sizes}\PY{p}{,} \PY{n}{colors}\PY{p}{,} \PY{n}{title}\PY{p}{,} \PY{n}{size\PYZus{}mult}\PY{o}{=}\PY{l+m+mi}{50000}\PY{p}{)}\PY{p}{:}
              \PY{n}{nodes} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{draw\PYZus{}networkx\PYZus{}nodes}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{pos}\PY{p}{,}
                                             \PY{n}{cmap}\PY{o}{=}\PY{n}{plt}\PY{o}{.}\PY{n}{cm}\PY{o}{.}\PY{n}{copper}\PY{p}{,} 
                                             \PY{n}{node\PYZus{}size}\PY{o}{=}\PY{p}{[}\PY{n}{c}\PY{o}{*}\PY{n}{size\PYZus{}mult} \PY{k}{for} \PY{n}{c} \PY{o+ow}{in} \PY{n}{sizes}\PY{p}{]}\PY{p}{,}
                                             \PY{n}{node\PYZus{}color}\PY{o}{=}\PY{n}{colors}\PY{p}{,}
                                             \PY{n}{nodelist}\PY{o}{=}\PY{n}{G}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}
              \PY{n}{nodes}\PY{o}{.}\PY{n}{set\PYZus{}norm}\PY{p}{(}\PY{n}{mcolors}\PY{o}{.}\PY{n}{SymLogNorm}\PY{p}{(}\PY{n}{linthresh}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{n}{linscale}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
              
              \PY{n}{pos\PYZus{}higher} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
              \PY{n}{y\PYZus{}off} \PY{o}{=} \PY{l+m+mf}{0.05}
          
              \PY{k}{for} \PY{n}{k}\PY{p}{,} \PY{n}{v} \PY{o+ow}{in} \PY{n}{pos}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                  \PY{n}{pos\PYZus{}higher}\PY{p}{[}\PY{n}{k}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{v}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{v}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{+}\PY{n}{y\PYZus{}off}\PY{p}{)}
          
              \PY{n}{labels} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{draw\PYZus{}networkx\PYZus{}labels}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{pos\PYZus{}higher}\PY{p}{)}
              \PY{n}{edges} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{draw\PYZus{}networkx\PYZus{}edges}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{pos}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.2}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{n}{title}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{off}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}521}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{eye\PYZus{}vector} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{ones}\PY{p}{(}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{1}\PY{o}{/}\PY{n+nb}{len}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          \PY{n}{zeros\PYZus{}vector} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pos}\PY{p}{,} \PY{n}{eye\PYZus{}vector}\PY{p}{,} \PY{n}{eye\PYZus{}vector}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{huh}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_20_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}522}]:} \PY{c+c1}{\PYZsh{} Let\PYZsq{}s try degree centrality}
          \PY{n}{pos} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{spring\PYZus{}layout}\PY{p}{(}\PY{n}{graph}\PY{p}{)}
          \PY{n}{dc} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{degree\PYZus{}centrality}\PY{p}{(}\PY{n}{graph}\PY{p}{)}
          \PY{n}{degree\PYZus{}centralities} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{dc}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pos}\PY{p}{,} \PY{n}{eye\PYZus{}vector}\PY{p}{,} \PY{n}{degree\PYZus{}centralities}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Degree centrality}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_21_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}523}]:} \PY{c+c1}{\PYZsh{} Let\PYZsq{}s try betweennes centrality}
          \PY{n}{pos} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{spring\PYZus{}layout}\PY{p}{(}\PY{n}{graph}\PY{p}{)}
          \PY{n}{dc} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{betweenness\PYZus{}centrality}\PY{p}{(}\PY{n}{graph}\PY{p}{)}
          \PY{n}{betweenness\PYZus{}centrality} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{dc}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pos}\PY{p}{,} \PY{n}{eye\PYZus{}vector}\PY{p}{,} \PY{n}{degree\PYZus{}centralities}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Betweenness centrality}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_22_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}524}]:} \PY{n}{top\PYZus{}vals\PYZus{}amount} \PY{o}{=} \PY{l+m+mi}{20}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}525}]:} \PY{c+c1}{\PYZsh{} Extract a subgraph by top betweenness centrality}
          \PY{n}{dcs} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{betweenness\PYZus{}centrality}\PY{p}{)}
          \PY{n}{nodes} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          \PY{n}{top} \PY{o}{=} \PY{n}{nodes}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argsort}\PY{p}{(}\PY{n}{dcs}\PY{p}{)}\PY{p}{]}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{:}\PY{p}{]}
          \PY{n}{mask} \PY{o}{=} \PY{n}{top}\PY{o}{.}\PY{n}{index}
          \PY{n}{nodes}\PY{o}{.}\PY{n}{index} \PY{o}{=} \PY{n}{dcs}\PY{o}{.}\PY{n}{index}
          \PY{n}{subgraph\PYZus{}nodes} \PY{o}{=} \PY{n}{nodes}\PY{o}{.}\PY{n}{ix}\PY{p}{[}\PY{n}{mask}\PY{p}{]}
          \PY{n}{subgraph\PYZus{}dcs} \PY{o}{=} \PY{n}{dcs}\PY{o}{.}\PY{n}{ix}\PY{p}{[}\PY{n}{mask}\PY{p}{]}
          \PY{n}{subgraph} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{subgraph}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{subgraph\PYZus{}nodes}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw}\PY{p}{(}\PY{n}{subgraph}\PY{p}{,} \PY{n}{nx}\PY{o}{.}\PY{n}{spring\PYZus{}layout}\PY{p}{(}\PY{n}{subgraph}\PY{p}{)}\PY{p}{,} \PY{n}{eye\PYZus{}vector}\PY{p}{,} \PY{n}{subgraph\PYZus{}dcs}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Betweenness centrality top }\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{ vertices}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/home/boris/anaconda3/lib/python3.6/site-packages/ipykernel\_launcher.py:7: DeprecationWarning: 
.ix is deprecated. Please use
.loc for label based indexing or
.iloc for positional indexing

See the documentation here:
http://pandas.pydata.org/pandas-docs/stable/indexing.html\#ix-indexer-is-deprecated
  import sys
/home/boris/anaconda3/lib/python3.6/site-packages/ipykernel\_launcher.py:8: DeprecationWarning: 
.ix is deprecated. Please use
.loc for label based indexing or
.iloc for positional indexing

See the documentation here:
http://pandas.pydata.org/pandas-docs/stable/indexing.html\#ix-indexer-is-deprecated
  

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_24_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}526}]:} \PY{n+nb}{print}\PY{p}{(}\PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{subgraph\PYZus{}nodes}\PY{p}{,} \PY{n}{subgraph\PYZus{}dcs}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                   0         1
29        Bamatabois  0.008041
31          Simplice  0.008640
41           Eponine  0.011488
49      Gillenormand  0.020211
26           Cosette  0.023796
47         MmeBurgon  0.026316
28      Fauchelevent  0.026491
57            Mabeuf  0.027661
24     MmeThenardier  0.029002
64           Bossuet  0.030754
16         Tholomyes  0.040629
58          Enjolras  0.042553
51  MlleGillenormand  0.047599
27            Javert  0.054332
25        Thenardier  0.074901
23           Fantine  0.129645
55            Marius  0.132032
48          Gavroche  0.165113
0             Myriel  0.176842
11           Valjean  0.569989

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}527}]:} \PY{c+c1}{\PYZsh{} Raw pagerank}
          \PY{n}{pranks\PYZus{}dict} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{graph}\PY{p}{)}
          \PY{n}{pranks} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{pranks\PYZus{}dict}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pos}\PY{p}{,} \PY{n}{eye\PYZus{}vector}\PY{p}{,} \PY{n}{pranks}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_26_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}528}]:} \PY{k}{def} \PY{n+nf}{draw\PYZus{}top}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{centralities}\PY{p}{,} \PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{o}{=}\PY{l+m+mi}{20}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
              \PY{c+c1}{\PYZsh{} Extract a subgraph by top betweenness centrality}
              \PY{n}{dcs} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{centralities}\PY{p}{)}
              \PY{n}{nodes} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}    
              \PY{n}{top} \PY{o}{=} \PY{n}{nodes}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argsort}\PY{p}{(}\PY{n}{dcs}\PY{p}{)}\PY{p}{]}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{:}\PY{p}{]}
              \PY{n}{mask} \PY{o}{=} \PY{n}{top}\PY{o}{.}\PY{n}{index}
              \PY{n}{nodes}\PY{o}{.}\PY{n}{index} \PY{o}{=} \PY{n}{dcs}\PY{o}{.}\PY{n}{index}
              \PY{n}{subgraph\PYZus{}nodes} \PY{o}{=} \PY{n}{nodes}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{mask}\PY{p}{]}
              \PY{n}{subgraph\PYZus{}dcs} \PY{o}{=} \PY{n}{dcs}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{mask}\PY{p}{]}
              \PY{n}{subgraph} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{subgraph}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{subgraph\PYZus{}nodes}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
              \PY{n}{normed\PYZus{}subgraph\PYZus{}dcs} \PY{o}{=} \PY{n}{subgraph\PYZus{}dcs}\PY{o}{/}\PY{n}{subgraph\PYZus{}dcs}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}
              \PY{n}{draw}\PY{p}{(}\PY{n}{subgraph}\PY{p}{,} \PY{n}{nx}\PY{o}{.}\PY{n}{spring\PYZus{}layout}\PY{p}{(}\PY{n}{subgraph}\PY{p}{)}\PY{p}{,} \PY{n}{eye\PYZus{}vector}\PY{p}{,} \PY{n}{normed\PYZus{}subgraph\PYZus{}dcs}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{ top }\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{ vertices}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{title}\PY{p}{,} \PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw\PYZus{}top}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pranks}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_27_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}529}]:} \PY{c+c1}{\PYZsh{} Main characters = Valjean, Javert, Gavroche, Cosette}
          
          \PY{n}{valjean\PYZus{}index} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Valjean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{javert\PYZus{}index} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Javert}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{gavroche\PYZus{}index} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gavroche}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{cosette\PYZus{}index} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cosette}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}530}]:} \PY{c+c1}{\PYZsh{} Pagerank with teleporting to Valjean}
          \PY{n}{valjean\PYZus{}personalization} \PY{o}{=} \PY{p}{\PYZob{}}\PY{n}{k}\PY{p}{:} \PY{l+m+mi}{0} \PY{k}{for} \PY{n}{k} \PY{o+ow}{in} \PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{\PYZcb{}}
          \PY{n}{valjean\PYZus{}personalization}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Valjean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
          
          \PY{n}{pranks\PYZus{}dict} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{personalization}\PY{o}{=}\PY{n}{valjean\PYZus{}personalization}\PY{p}{)}
          \PY{n}{pranks} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{pranks\PYZus{}dict}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw\PYZus{}top}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pranks}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank Valjean personaloization}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_29_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    We can see two communities around Valjean. These are different chacters
of the novel that interacted with Valjean. Myriel stands aside, as a
person that appeared only with Valjean.

Centering on Valjean allowed us to see two communities.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}531}]:} \PY{c+c1}{\PYZsh{} Pagerank with teleporting to Javert}
          \PY{n}{javert\PYZus{}personalization} \PY{o}{=} \PY{p}{\PYZob{}}\PY{n}{k}\PY{p}{:} \PY{l+m+mi}{0} \PY{k}{for} \PY{n}{k} \PY{o+ow}{in} \PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{\PYZcb{}}
          \PY{n}{javert\PYZus{}personalization}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Javert}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
          
          \PY{n}{pranks\PYZus{}dict} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{personalization}\PY{o}{=}\PY{n}{javert\PYZus{}personalization}\PY{p}{)}
          \PY{n}{pranks} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{pranks\PYZus{}dict}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw\PYZus{}top}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pranks}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank Javert personaloization}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_31_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}532}]:} \PY{c+c1}{\PYZsh{} Pagerank with teleporting to Gavroche}
          \PY{n}{gavroche\PYZus{}personalization} \PY{o}{=} \PY{p}{\PYZob{}}\PY{n}{k}\PY{p}{:} \PY{l+m+mi}{0} \PY{k}{for} \PY{n}{k} \PY{o+ow}{in} \PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{\PYZcb{}}
          \PY{n}{gavroche\PYZus{}personalization}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gavroche}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
          
          \PY{n}{pranks\PYZus{}dict} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{personalization}\PY{o}{=}\PY{n}{gavroche\PYZus{}personalization}\PY{p}{)}
          \PY{n}{pranks} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{pranks\PYZus{}dict}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw\PYZus{}top}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pranks}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank Gavroche personaloization}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_32_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}533}]:} \PY{c+c1}{\PYZsh{} Pagerank with teleporting to Gavroche}
          \PY{n}{cosette\PYZus{}personalization} \PY{o}{=} \PY{p}{\PYZob{}}\PY{n}{k}\PY{p}{:} \PY{l+m+mi}{0} \PY{k}{for} \PY{n}{k} \PY{o+ow}{in} \PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{\PYZcb{}}
          \PY{n}{cosette\PYZus{}personalization}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cosette}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
          
          \PY{n}{pranks\PYZus{}dict} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{personalization}\PY{o}{=}\PY{n}{cosette\PYZus{}personalization}\PY{p}{)}
          \PY{n}{pranks} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{pranks\PYZus{}dict}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw\PYZus{}top}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pranks}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank Cosette personaloization}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_33_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}534}]:} \PY{c+c1}{\PYZsh{} Pagerank with teleporting to main characters uniformly}
          
          \PY{n}{char\PYZus{}personalization} \PY{o}{=} \PY{p}{\PYZob{}}\PY{n}{k}\PY{p}{:} \PY{l+m+mi}{0} \PY{k}{for} \PY{n}{k} \PY{o+ow}{in} \PY{n}{graph}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{\PYZcb{}}
          \PY{n}{chars} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Valjean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Javert}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Gavroche}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cosette}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{k}{for} \PY{n}{char} \PY{o+ow}{in} \PY{n}{chars}\PY{p}{:}
              \PY{n}{char\PYZus{}personalization}\PY{p}{[}\PY{n}{char}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}\PY{o}{/}\PY{n+nb}{len}\PY{p}{(}\PY{n}{chars}\PY{p}{)}
          
          \PY{n}{pranks\PYZus{}dict} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{pagerank}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{personalization}\PY{o}{=}\PY{n}{char\PYZus{}personalization}\PY{p}{)}
          \PY{n}{pranks} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{pranks\PYZus{}dict}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw\PYZus{}top}\PY{p}{(}\PY{n}{graph}\PY{p}{,} \PY{n}{pranks}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pagerank main characters personaloization}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_34_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    We can see characters that main characters most often appeared with.

    \subsection{Task 3}\label{task-3}

Let us now focus on larger networks. First let us read the network of
political blogs.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}535}]:} \PY{c+c1}{\PYZsh{}Some arcs are multi and it prevents some algorithms to work. We thus simplify it.}
          
          \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{read\PYZus{}gml}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{polblogs.gml}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{A} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{adjacency\PYZus{}matrix}\PY{p}{(}\PY{n}{G}\PY{p}{)}
          \PY{n}{M} \PY{o}{=} \PY{n}{A}\PY{o}{.}\PY{n}{astype}\PY{p}{(}\PY{n+nb}{bool}\PY{p}{)}\PY{o}{.}\PY{n}{astype}\PY{p}{(}\PY{n+nb}{int}\PY{p}{)} \PY{c+c1}{\PYZsh{}converts non\PYZhy{}zero entries to True and then True to 1.}
          \PY{n}{H} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{DiGraph}\PY{p}{(}\PY{n}{M}\PY{p}{)}
          \PY{n}{L} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{G}\PY{p}{)}
          \PY{n}{mapping}\PY{o}{=}\PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
          \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{L}\PY{p}{)}\PY{p}{)}\PY{p}{:}
              \PY{n}{mapping}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{=}\PY{n}{L}\PY{p}{[}\PY{n}{i}\PY{p}{]}
          \PY{n}{Gsimp}\PY{o}{=}\PY{n}{nx}\PY{o}{.}\PY{n}{relabel\PYZus{}nodes}\PY{p}{(}\PY{n}{H}\PY{p}{,}\PY{n}{mapping}\PY{p}{)} \PY{c+c1}{\PYZsh{}relabel vertices with original names.}
\end{Verbatim}


    Run the HITS algorithm on \texttt{Gsimp} and plot the hubs score against
the authorities score.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}536}]:} \PY{p}{(}\PY{n}{h}\PY{p}{,} \PY{n}{a}\PY{p}{)} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{hits}\PY{p}{(}\PY{n}{Gsimp}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}537}]:} \PY{n}{la} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{a}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          \PY{n}{lh} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{h}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{lh}\PY{p}{,}\PY{n}{la}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{+}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hubs}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Auth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}537}]:} Text(0,0.5,'Auth')
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_40_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Vizualize top Authorities colored in blue with sizes proportional to
A-value and their common Hubs coloured in green with size proportional
to H-value.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}546}]:} \PY{c+c1}{\PYZsh{} Task:}
          \PY{c+c1}{\PYZsh{} Pick the top biggest authorities}
          \PY{c+c1}{\PYZsh{} Draw them with size proportional to A score}
          \PY{c+c1}{\PYZsh{} And pick hubs}
          \PY{c+c1}{\PYZsh{} Criteria:}
          \PY{c+c1}{\PYZsh{} 1. Hub has high hub score and is connected to selected authorities}
          \PY{c+c1}{\PYZsh{} Draw hubs in green with color depth proportional to H\PYZhy{}value}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}557}]:} \PY{n}{top\PYZus{}vals\PYZus{}amount} \PY{o}{=} \PY{l+m+mi}{10}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}558}]:} \PY{n}{nodes} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{Gsimp}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          
          \PY{n}{a\PYZus{}vals} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{a}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n}{h\PYZus{}vals} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{h}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          
          \PY{n}{top\PYZus{}a} \PY{o}{=} \PY{n}{nodes}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argsort}\PY{p}{(}\PY{n}{a\PYZus{}vals}\PY{p}{)}\PY{p}{]}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{:}\PY{p}{]}
          \PY{n}{top\PYZus{}h} \PY{o}{=} \PY{n}{nodes}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argsort}\PY{p}{(}\PY{n}{h\PYZus{}vals}\PY{p}{)}\PY{p}{]}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{:}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}559}]:} \PY{c+c1}{\PYZsh{} Authorities subgraph}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw\PYZus{}top}\PY{p}{(}\PY{n}{Gsimp}\PY{p}{,} \PY{n}{a\PYZus{}vals}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Authorities graph}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{o}{=}\PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_45_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}560}]:} \PY{c+c1}{\PYZsh{} Hubs subgraph}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
          \PY{n}{draw\PYZus{}top}\PY{p}{(}\PY{n}{Gsimp}\PY{p}{,} \PY{n}{h\PYZus{}vals}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hubs graph}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{o}{=}\PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_46_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}561}]:} \PY{c+c1}{\PYZsh{} get top hubs}
          \PY{n}{good\PYZus{}hubs} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{k}{for} \PY{n}{hub} \PY{o+ow}{in} \PY{n}{top\PYZus{}h}\PY{p}{:}
              \PY{k}{for} \PY{n}{authority} \PY{o+ow}{in} \PY{n}{top\PYZus{}a}\PY{p}{:}
                  \PY{k}{if} \PY{n}{Gsimp}\PY{o}{.}\PY{n}{has\PYZus{}edge}\PY{p}{(}\PY{n}{hub}\PY{p}{,} \PY{n}{authority}\PY{p}{)} \PY{o+ow}{or} \PY{n}{Gsimp}\PY{o}{.}\PY{n}{has\PYZus{}edge}\PY{p}{(}\PY{n}{authority}\PY{p}{,} \PY{n}{hub}\PY{p}{)}\PY{p}{:}
                      \PY{n}{good\PYZus{}hubs}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{hub}\PY{p}{)}
                      \PY{k}{break}
          \PY{n+nb}{len}\PY{p}{(}\PY{n}{good\PYZus{}hubs}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} All top hub value hubs are connected to at least one top authority}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}561}]:} 10
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}562}]:} \PY{c+c1}{\PYZsh{} Plot hubs and authorities together}
          \PY{n}{authority\PYZus{}nodes} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{top\PYZus{}a}\PY{o}{.}\PY{n}{values}\PY{p}{)}
          \PY{n}{hub\PYZus{}nodes} \PY{o}{=}  \PY{n+nb}{list}\PY{p}{(}\PY{n}{top\PYZus{}h}\PY{o}{.}\PY{n}{values}\PY{p}{)}
          \PY{n}{nodes} \PY{o}{=} \PY{n}{authority\PYZus{}nodes} \PY{o}{+} \PY{n}{hub\PYZus{}nodes}
          
          \PY{n}{normed\PYZus{}avals} \PY{o}{=} \PY{n}{a\PYZus{}vals}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argsort}\PY{p}{(}\PY{n}{a\PYZus{}vals}\PY{p}{)}\PY{p}{]}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{:}\PY{p}{]}
          \PY{n}{normed\PYZus{}avals} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{normed\PYZus{}avals}\PY{o}{*}\PY{l+m+mi}{20}\PY{o}{/}\PY{n}{normed\PYZus{}avals}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          \PY{n}{normed\PYZus{}hvals} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{h\PYZus{}vals}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argsort}\PY{p}{(}\PY{n}{h\PYZus{}vals}\PY{p}{)}\PY{p}{]}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{n}{top\PYZus{}vals\PYZus{}amount}\PY{p}{:}\PY{p}{]}\PY{p}{)}
          \PY{n}{normed\PYZus{}hvals} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{normed\PYZus{}hvals}\PY{p}{)}\PY{o}{/}\PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{normed\PYZus{}hvals}\PY{p}{)}\PY{p}{)}
          
          \PY{n}{authority\PYZus{}sizes} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{normed\PYZus{}avals}\PY{p}{)} 
          \PY{n}{hub\PYZus{}sizes} \PY{o}{=} \PY{p}{[}\PY{l+m+mf}{0.5} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{top\PYZus{}h}\PY{p}{)}\PY{p}{)}\PY{p}{]}
          \PY{n}{authority\PYZus{}colors} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{black}\PY{l+s+s1}{\PYZsq{}} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{top\PYZus{}a}\PY{p}{)}\PY{p}{)}\PY{p}{]}
          \PY{n}{hub\PYZus{}colors} \PY{o}{=} \PY{n}{normed\PYZus{}hvals}
          
          \PY{n}{subgraph} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{subgraph}\PY{p}{(}\PY{n}{Gsimp}\PY{p}{,} \PY{n}{nodes}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}563}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{30}\PY{p}{,}\PY{l+m+mi}{20}\PY{p}{)}\PY{p}{)}
          
          \PY{n}{size\PYZus{}mult} \PY{o}{=} \PY{l+m+mi}{4000}
          
          
          \PY{n}{pos} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{spring\PYZus{}layout}\PY{p}{(}\PY{n}{subgraph}\PY{p}{)}
          
          \PY{n}{nodes\PYZus{}draw} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{draw\PYZus{}networkx\PYZus{}nodes}\PY{p}{(}\PY{n}{subgraph}\PY{p}{,} \PY{n}{pos}\PY{p}{,}
                                         \PY{n}{node\PYZus{}size}\PY{o}{=}\PY{p}{[}\PY{n}{c}\PY{o}{*}\PY{n}{size\PYZus{}mult} \PY{k}{for} \PY{n}{c} \PY{o+ow}{in} \PY{n}{authority\PYZus{}sizes}\PY{p}{]}\PY{p}{,}
                                         \PY{n}{node\PYZus{}color}\PY{o}{=}\PY{n}{authority\PYZus{}colors}\PY{p}{,}
                                         \PY{n}{nodelist}\PY{o}{=}\PY{n}{authority\PYZus{}nodes}\PY{p}{)}
          \PY{n}{nodes\PYZus{}draw}\PY{o}{.}\PY{n}{set\PYZus{}norm}\PY{p}{(}\PY{n}{mcolors}\PY{o}{.}\PY{n}{SymLogNorm}\PY{p}{(}\PY{n}{linthresh}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{n}{linscale}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
          \PY{n}{nodes\PYZus{}draw} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{draw\PYZus{}networkx\PYZus{}nodes}\PY{p}{(}\PY{n}{subgraph}\PY{p}{,} \PY{n}{pos}\PY{p}{,}
                                         \PY{n}{node\PYZus{}size}\PY{o}{=}\PY{p}{[}\PY{n}{c}\PY{o}{*}\PY{n}{size\PYZus{}mult} \PY{k}{for} \PY{n}{c} \PY{o+ow}{in} \PY{n}{hub\PYZus{}sizes}\PY{p}{]}\PY{p}{,}
                                         \PY{n}{cmap} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{cm}\PY{o}{.}\PY{n}{Greens}\PY{p}{,} 
                                         \PY{n}{node\PYZus{}color}\PY{o}{=}\PY{n}{hub\PYZus{}colors}\PY{p}{,}
                                         \PY{n}{nodelist}\PY{o}{=}\PY{n}{hub\PYZus{}nodes}\PY{p}{)}
          \PY{n}{nodes\PYZus{}draw}\PY{o}{.}\PY{n}{set\PYZus{}norm}\PY{p}{(}\PY{n}{mcolors}\PY{o}{.}\PY{n}{SymLogNorm}\PY{p}{(}\PY{n}{linthresh}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{n}{linscale}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
          
          \PY{n}{pos\PYZus{}higher} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
          \PY{n}{y\PYZus{}off} \PY{o}{=} \PY{l+m+mf}{0.1}
          
          \PY{k}{for} \PY{n}{k}\PY{p}{,} \PY{n}{v} \PY{o+ow}{in} \PY{n}{pos}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
              \PY{n}{pos\PYZus{}higher}\PY{p}{[}\PY{n}{k}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{v}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{v}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{+}\PY{n}{y\PYZus{}off}\PY{p}{)}
          
          \PY{n}{labels} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{draw\PYZus{}networkx\PYZus{}labels}\PY{p}{(}\PY{n}{subgraph}\PY{p}{,} \PY{n}{pos\PYZus{}higher}\PY{p}{)}
          \PY{n}{edges} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{draw\PYZus{}networkx\PYZus{}edges}\PY{p}{(}\PY{n}{subgraph}\PY{p}{,} \PY{n}{pos}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.1}\PY{p}{)}
          
          \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Polblogs hubs and authorities}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{off}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_49_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Here we can see authorities - black nodes. Node size is proportional to
A-score. Green nodes are hubs. Color depth is proportional to H-score.

Curiously one node is both a strong hub and a large authority.


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
